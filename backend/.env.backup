# =====================================
# CONFIGURACIÓN DE BACKUP
# La Pública - Sistema de Mensajería
# =====================================

# Configuración de base de datos
POSTGRES_HOST=postgres
POSTGRES_DB=la_publica_prod
POSTGRES_USER=la_publica_user
DB_PASSWORD=your_secure_password_here

# Configuración de Redis
REDIS_PASSWORD=your_redis_password_here

# Configuración de backups locales
BACKUP_DIR=/app/backups
RETENTION_DAYS=7
KEEP_LOCAL_BACKUP=true

# Configuración de S3 (opcional)
S3_BUCKET=lapublica-backups
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_DEFAULT_REGION=eu-west-1

# Configuración de verificación
MAX_AGE_HOURS=25
VERIFY_RESTORE=false

# Notificaciones (opcional)
WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
MAILTO=admin@lapublica.es

# Configuración de logs
LOG_LEVEL=info
BACKUP_LOG_PATH=/app/logs/backup.log

# =====================================
# INSTRUCCIONES DE USO
# =====================================

# 1. Copiar a .env.backup.local y ajustar valores:
#    cp .env.backup .env.backup.local
#    nano .env.backup.local

# 2. Cargar variables antes de ejecutar scripts:
#    export $(cat .env.backup.local | xargs)

# 3. Ejecutar backup manual:
#    ./scripts/backup-database.sh

# 4. Verificar backups:
#    ./scripts/verify-backups.sh

# 5. Restaurar backup:
#    ./scripts/restore-database.sh -f lapublica_backup_20240101_120000.sql

# 6. Instalar cron job:
#    crontab crontab-backup